<div class="container">
  <h2>らあめんKING</h2>
    <h5><i class="fas fa-trophy" style='color: gold;'></i>総合ランキング</h5>
    <div class="row">
      <% @stores.each.with_index(1) do |store, index| %>
      <% avg = store.store_comments.average(:rate) %>
      <% if index <= 3 %>
        <div class="col-md-4" >
          <div class="card-group">
            <div class="card">
              <%= link_to store_path(store.id) do %>
                <%= attachment_image_tag(store.store_comments.order(rate: :DESC).first, :product_image, fallback: "no_image.jpg", class: 'card-img-top') %>
              <div class="card-body text">
              <h4>
                <% case index when 1 %>
                  <i class="fas fa-crown" style='color: gold;'></i>1位
                <% when 2 %>
                  <i class="fas fa-crown" style='color: silver;'></i>2位
                <% when 3 %>
                  <i class="fas fa-crown" style='color: orange;'></i>3位
                <% end %>
                  <h5 class="card-title"><%= store.store_name %></h5>
                <% end %>
              </h4>
                <%= render 'stores/star_average', { rate_name: "rate" ,store: store, score: avg.nil? ? 0 : avg.round(1) } %>
                <%= store.address %>
              </div>
            </div>
          </div>
        </div>
        <% else %>
        <table class="table m-2" style="table-layout:fixed;">
          <tbody>
          <tr>
            <th style="width:150px;">第<%= index %>位</th>
            <th><%= store.store_name %></th>
            <th><%= store.address %></th>
            <th><%= render 'stores/star_average', { rate_name: "rate" ,store: store, score: avg.nil? ? 0 : avg.round(1) } %></th>
          </tr>
        </tbody>
        </table>
          <% end %>
      <% end %>
    </div>
<%#= paginate @stores, theme: 'twitter-bootstrap-4' %>



</div>